{% extends "base.html" %}

{% block title %}登录 - 智慧教育平台{% endblock %}

{% block body %}
<div class="auth-page">
    <div class="auth-left">
        <h1>🎓 智慧教育平台</h1>
        <p>
            AI赋能的K12学习助手<br>
            拍照解题 · 作文批改 · 智能辅导<br>
            让学习更高效，更有趣！
        </p>
        <div class="auth-decorations">
            <div class="auth-decoration">📚</div>
            <div class="auth-decoration">✏️</div>
            <div class="auth-decoration">🌟</div>
        </div>
    </div>
    
    <div class="auth-right">
        <div class="auth-card">
            <h2>欢迎回来</h2>
            <p class="subtitle">登录你的账号，继续学习之旅</p>
            
            <form class="auth-form" id="loginForm">
                <div class="input-group">
                    <label for="username">用户名</label>
                    <input type="text" class="input" id="username" name="username" placeholder="请输入用户名" required>
                </div>
                
                <div class="input-group">
                    <label for="password">密码</label>
                    <input type="password" class="input" id="password" name="password" placeholder="请输入密码" required>
                </div>
                
                <button type="submit" class="btn btn-primary btn-lg">
                    <i class="fas fa-sign-in-alt"></i>
                    登录
                </button>
            </form>
            
            <div class="auth-footer">
                还没有账号？<a href="/register">立即注册</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.getElementById('loginForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const formData = new FormData(e.target);
    
    try {
        await api('/api/login', {
            method: 'POST',
            body: formData
        });
        showToast('登录成功！');
        setTimeout(() => window.location.href = '/', 500);
    } catch (error) {
        // 错误已在api函数中处理
    }
});
</script>
{% endblock %}
